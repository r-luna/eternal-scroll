var EternalScroll=function(){function t(t){l.contentEl.innerHTML=l.dataFuncRef(t)}function e(e){var i=l.contentEl.firstChild,p=i.getBoundingClientRect(),c=l.contentEl.lastChild,s=c.getBoundingClientRect(),a=null;s.top<l.wrapperElHeight&&(a=+c.getAttribute("data-num")-l.rowsPerWindow,t(a),l.contentEl.style.marginTop=Math.ceil(a*l.rowHeight)+"px"),p.top>l.wrapperEl.getBoundingClientRect().top&&(a=+i.getAttribute("data-num")-l.rowsPerWindow,a=0>a?0:a,t(a),l.contentEl.style.marginTop=~~(a*l.rowHeight)+"px"),o=e.target.scrollTop,window.clearTimeout(r),r=window.setTimeout(n,200)}function n(){l.wrapperEl.scrollTop===o&&(r=null)}var l=this,r=null,o=0;this.wrapperEl=null,this.wrapperElHeight=null,this.contentEl=null,this.dataFuncRef=null,this.rowHeight=null,this.rowsPerWindow=null,this.preScrollBuffer=null,this.postScrollBuffer=null,this.destroy=function(){l.wrapperEl.removeEventListener("scroll",e),l.contentEl.style.marginTop="0px"},this.init=function(n,r,o,i){l.preScrollBuffer=o,l.postScrollBuffer=i,l.dataFuncRef=r,l.wrapperEl=document.getElementById(n),l.contentEl=l.wrapperEl.children[0],t(0),l.wrapperElHeight=l.wrapperEl.offsetHeight,l.rowHeight=l.contentEl.firstChild.offsetHeight,l.rowsPerWindow=Math.ceil(l.wrapperElHeight/l.rowHeight),l.wrapperEl.addEventListener("scroll",e,!1),window.addEventListener("scrollend",function(t){console.log("stopped",t)},!1)}};