/* Rick Luna - www.rickluna.com - GNU PL2 */
var EternalScroll=function(){function t(t){n.contentEl.innerHTML=n.dataFuncRef(t)}function e(e){var o=n.contentEl.firstChild,p=o.getBoundingClientRect(),a=n.contentEl.lastChild,c=a.getBoundingClientRect(),u=null;c.top<n.wrapperElHeight&&(u=+a.getAttribute("data-num")-n.rowsPerWindow,t(u),n.contentEl.style.marginTop=Math.ceil(u*n.rowHeight)+"px"),p.top>n.wrapperEl.getBoundingClientRect().top&&(u=+o.getAttribute("data-num")-n.rowsPerWindow,u=0>u?0:u,t(u),n.contentEl.style.marginTop=~~(u*n.rowHeight)+"px"),i=e.target.scrollTop,window.clearTimeout(r),r=window.setTimeout(l,200)}function l(){if(n.wrapperEl.scrollTop===i){var t={target:n.wrapperEl,scrollposition:i};r=null,o&&o(t)}}var n=this,r=null,i=0,o=null;this.wrapperEl=null,this.wrapperElHeight=null,this.contentEl=null,this.dataFuncRef=null,this.rowHeight=null,this.rowsPerWindow=null,this.preScrollBuffer=null,this.postScrollBuffer=null,this.destroy=function(){n.wrapperEl.removeEventListener("scroll",e),n.contentEl.style.marginTop="0px"},this.init=function(l,r,i,p,a){o=i||null,n.preScrollBuffer=p,n.postScrollBuffer=a,n.dataFuncRef=r,n.wrapperEl=document.getElementById(l),n.contentEl=n.wrapperEl.children[0],t(0),n.wrapperElHeight=n.wrapperEl.offsetHeight,n.rowHeight=n.contentEl.firstChild.offsetHeight,n.rowsPerWindow=Math.ceil(n.wrapperElHeight/n.rowHeight),n.wrapperEl.addEventListener("scroll",e,!1)}};