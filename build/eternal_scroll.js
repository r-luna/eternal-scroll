var EternalScroll=function(){function t(t){n.contentEl.innerHTML=n.dataFuncRef(t)}function e(e){var i=n.contentEl.firstChild,p=i.getBoundingClientRect(),c=n.contentEl.lastChild,s=c.getBoundingClientRect(),u=null;s.top<n.wrapperElHeight&&(u=+c.getAttribute("data-num")-n.rowsPerWindow,t(u),n.contentEl.style.marginTop=Math.ceil(u*n.rowHeight)+"px"),p.top>n.wrapperEl.getBoundingClientRect().top&&(u=+i.getAttribute("data-num")-n.rowsPerWindow,u=0>u?0:u,t(u),n.contentEl.style.marginTop=~~(u*n.rowHeight)+"px"),o=e.target.scrollTop,window.clearTimeout(r),r=window.setTimeout(l,200)}function l(){n.wrapperEl.scrollTop===o&&(r=null,i&&i())}var n=this,r=null,o=0,i=null;this.wrapperEl=null,this.wrapperElHeight=null,this.contentEl=null,this.dataFuncRef=null,this.rowHeight=null,this.rowsPerWindow=null,this.preScrollBuffer=null,this.postScrollBuffer=null,this.destroy=function(){n.wrapperEl.removeEventListener("scroll",e),n.contentEl.style.marginTop="0px"},this.init=function(l,r,o,p,c){i=o||null,n.preScrollBuffer=p,n.postScrollBuffer=c,n.dataFuncRef=r,n.wrapperEl=document.getElementById(l),n.contentEl=n.wrapperEl.children[0],t(0),n.wrapperElHeight=n.wrapperEl.offsetHeight,n.rowHeight=n.contentEl.firstChild.offsetHeight,n.rowsPerWindow=Math.ceil(n.wrapperElHeight/n.rowHeight),n.wrapperEl.addEventListener("scroll",e,!1),window.addEventListener("scrollend",function(t){console.log("stopped",t)},!1)}};